(this.webpackJsonpphonebook_step10=this.webpackJsonpphonebook_step10||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),o=t.n(a),u=t(15),r=t.n(u),s=(t(21),t(6)),i=t(3),l=function(e){var n=e.newvalue,t=e.handleronchange;return Object(c.jsx)("input",{value:n,onChange:t})},d=t(4),j=t.n(d),b="/api/persons",f=function(){return j.a.get(b).then((function(e){return e.data}))},h=function(e){return j.a.post(b,e).then((function(e){return e.data}))},m=function(e,n){return j.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"successe",children:n})},p=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},v=function(e){var n=Object(a.useState)([]),t=Object(i.a)(n,2),o=t[0],u=t[1],r=Object(a.useState)(""),d=Object(i.a)(r,2),b=d[0],v=d[1],g=Object(a.useState)(""),x=Object(i.a)(g,2),w=x[0],S=x[1],k=Object(a.useState)(""),y=Object(i.a)(k,2),C=y[0],N=y[1],T=Object(a.useState)("Display message succes"),F=Object(i.a)(T,2),D=F[0],P=F[1],B=Object(a.useState)("some error happened..."),E=Object(i.a)(B,2),I=E[0],J=E[1];Object(a.useEffect)((function(){console.log("effect"),f().then((function(e){u(e)}))}),[]);var L=o,_=function(e){var n=o.find((function(n){return n.id===e})),t=Object(s.a)(Object(s.a)({},n),{},{newNumber:o.number});m(e,t).then((function(n){u(o.map((function(t){return t.id!==e?t:n})))})).catch((function(n){J("the name '".concat(o.name,"\n    ' was already deleted from server")),setTimeout((function(){J(null)}),5e3),u(o.filter((function(n){return n.id!==e})))}))};C&&(L=o.filter((function(e){return e.name.includes(C)})));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)(l,{newvalue:C,handleronchange:function(e){N(e.target.value)}})]}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{message:D}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:b,number:w};o.map((function(e){return e.name})).includes(b)?(alert("".concat(b," is already added to phonebook")),_(o.id),v(""),S("")):h(n).then((function(e){u(o.concat(e)),P("Added'".concat(b," successe")),v(""),S(""),setTimeout((function(){P(null)}),5e3)}))},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)(l,{newvalue:b,handleronchange:function(e){v(e.target.value)}})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)(l,{newvalue:w,handleronchange:function(e){S(e.target.value)}})]}),Object(c.jsxs)("button",{type:"submit",children:[L.map((function(e,n){})),"add"]})]}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("div",{children:L.map((function(e,n){return Object(c.jsxs)("p",{children:[e.name,"  ",e.number,Object(c.jsx)("button",{onClick:function(){var n;window.confirm("delete  ".concat(e.name," ?"))&&(n=e.id,j.a.delete("http://localhost:3001/persons/".concat(n)).then((function(e){u(o.filter((function(e){return e.id!==n}))),v(""),S(""),console.log("respose data",e.data)})).catch((function(e){J(e.message),setTimeout((function(){J(null),console.log("erro",e)}),5e3)})))},children:"delete"})]},n)}))}),Object(c.jsx)(p,{message:I})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,o=n.getLCP,u=n.getTTFB;t(e),c(e),a(e),o(e),u(e)}))};r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root")),g()}},[[40,1,2]]]);
//# sourceMappingURL=main.722e476b.chunk.js.map